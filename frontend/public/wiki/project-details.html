<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DÃ©tail des Composants - Architecture Site Gamer 2025</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Orbitron:wght@500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="wiki-styles.css">
    <style>
        /* Styles spÃ©cifiques Ã  la page de dÃ©tail */
        .header { padding: 40px 20px; }
        .header h1 { font-size: 2.5em; display: inline-block; min-width: max-content; margin-bottom: 10px; }
        .header p { font-size: 1.1em; opacity: 0.9; }
        .container { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }
        .toc { background: rgba(212, 255, 0, 0.1); border: 1px solid #667eea; border-radius: 10px; padding: 25px; margin-bottom: 40px; }
        .toc h2 { color: #d4ff00; margin-bottom: 20px; }
        .toc ul { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; }
        .toc li { list-style: none; }
        .toc a { color: #2ecc71; text-decoration: none; padding: 8px 12px; border-radius: 6px; transition: all 0.3s; display: block; }
        .toc a:hover { background: rgba(46, 204, 113, 0.2); transform: translateX(5px); }
        .component { background: linear-gradient(145deg, #2a2a40, #1f1f35); border-left: 4px solid #667eea; border-radius: 8px; padding: 30px; margin-bottom: 30px; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3); scroll-margin-top: 100px; }
        .component h2 { color: #d4ff00; margin-bottom: 5px; font-size: 1.8em; display: flex; align-items: center; gap: 15px; }
        .component-icon { font-size: 2.5em; }
        .component-type { color: #2ecc71; font-size: 0.9em; opacity: 0.8; margin-bottom: 15px; }
        .component-section { margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(102, 126, 234, 0.3); }
        .component-section:first-child { margin-top: 0; padding-top: 0; border-top: none; }
        .section-title { color: #f39c12; font-weight: 600; font-size: 1.1em; margin-bottom: 12px; }
        .section-content { opacity: 0.85; line-height: 1.6; }
        .endpoint { background: rgba(212, 255, 0, 0.1); border-left: 3px solid #2ecc71; padding: 12px; margin: 10px 0; border-radius: 6px; font-family: 'Courier New', monospace; font-size: 0.9em; }
        .endpoint-method { color: #f39c12; font-weight: 600; margin-right: 10px; }
        .endpoint-path { color: #2ecc71; }
        .endpoint-desc { font-family: 'Poppins'; color: #b0b0b0; font-size: 0.85em; margin-top: 5px; }
        .list-item { margin: 8px 0; padding: 8px 12px; background: rgba(102, 126, 234, 0.05); border-radius: 4px; }
        .tag { display: inline-block; background: rgba(46, 204, 113, 0.2); color: #2ecc71; padding: 4px 10px; border-radius: 12px; font-size: 0.8em; margin: 4px 4px 4px 0; }
        .connections { background: rgba(52, 152, 219, 0.1); border-left: 3px solid #3498db; padding: 15px; border-radius: 6px; margin: 15px 0; }
        .connections-title { color: #3498db; font-weight: 600; margin-bottom: 10px; }
        .connection-item { margin: 6px 0; color: #a0a0a0; }
        .connection-item strong { color: #2ecc71; }
        .code-block { background: #000; border: 1px solid #333; padding: 15px; border-radius: 6px; overflow-x: auto; margin: 10px 0; }
        .code-block code { color: #2ecc71; font-family: 'Courier New'; font-size: 0.9em; }
        .top-nav { background: rgba(212, 255, 0, 0.1); padding: 15px 20px; border-bottom: 1px solid #d4ff00; position: sticky; top: 0; z-index: 100; backdrop-filter: blur(10px); }
        .top-nav a { color: #d4ff00; text-decoration: none; margin-right: 25px; transition: all 0.3s; font-weight: 500; display: inline-flex; align-items: center; gap: 8px; }
        .top-nav a:hover { color: #6bff6b; transform: translateY(-2px); }
        .nav { position: sticky; top: 61px; background: linear-gradient(135deg, #1a1a2a 0%, #121220 100%); border-bottom: 2px solid #d4ff00; padding: 15px 20px; margin: -40px -20px 40px -20px; display: flex; gap: 20px; z-index: 99; justify-content: center; flex-wrap: wrap; }
        .nav a { display: inline-block; min-width: max-content; text-decoration: none; padding: 8px 16px; border-radius: 6px; transition: all 0.3s; background: rgba(255, 255, 255, 0.1); }
        .nav a:hover { background: rgba(255, 255, 255, 0.2); transform: translateY(-2px); }
        .footer { text-align: center; margin-top: 60px; padding: 30px; border-top: 1px solid rgba(102, 126, 234, 0.3); opacity: 0.7; }
        .badge { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 0.75em; font-weight: 600; }
        .badge-frontend { background: rgba(231, 76, 60, 0.3); color: #e74c3c; }
        .badge-api { background: rgba(46, 204, 113, 0.3); color: #2ecc71; }
        .badge-server { background: rgba(243, 156, 18, 0.3); color: #f39c12; }
        .badge-database { background: rgba(52, 152, 219, 0.3); color: #3498db; }
        .badge-file { background: rgba(26, 188, 156, 0.3); color: #1abc9c; }
        .badge-script { background: rgba(155, 89, 182, 0.3); color: #9b59b6; }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ“‹ DÃ©tail Complet des Composants</h1>
        <p>Architecture Site Gamer 2025 - Documentation dÃ©taillÃ©e</p>
    </div>

    <nav class="top-nav">
        <a href="wiki.html">ğŸ  Accueil Wiki</a>
        <a href="api-reference.html">ğŸ“ API</a>
        <a href="database.html">ğŸ—„ï¸ Base de donnÃ©es</a>
        <a href="scripts.html">âš™ï¸ Scripts</a>
        <a href="troubleshooting.html">ğŸ”§ DÃ©pannage</a>
        <a href="changelog.html">ğŸ“ Changelog</a>
    </nav>

    <div class="container">
        <div class="nav">
            <a href="#pages-html">ğŸŒ Pages HTML</a>
            <a href="#assets">ğŸ¨ Assets</a>
            <a href="#api-produits">ğŸ“¦ API Produits</a>
            <a href="#api-tendances">ğŸ”¥ API Tendances</a>
            <a href="#api-fiches">ğŸ“„ API Fiches</a>
            <a href="#package">ğŸ“¦ package.json</a>
            <a href="#server">ğŸ–¥ï¸ server.js</a>
            <a href="#fiches">ğŸ“ Fiches/</a>
            <a href="#postgresql">ğŸ˜ PostgreSQL</a>
            <a href="#sql-data">ğŸ—„ï¸ SQL Data</a>
            <a href="#generate">ğŸ”„ Generate</a>
            <a href="#verify">âœ… Verify</a>
            <a href="#normalize">ğŸ”§ Normalize</a>
        </div>

        <div class="toc">
            <h2>ğŸ“š Table des matiÃ¨res</h2>
            <ul>
                <li><a href="#pages-html">ğŸŒ Pages HTML - Frontend statique</a></li>
                <li><a href="#assets">ğŸ¨ Assets - CSS/JS minifiÃ©s</a></li>
                <li><a href="#api-produits">ğŸ“¦ API Produits - CRUD complet</a></li>
                <li><a href="#api-tendances">ğŸ”¥ API Tendances - Contenu Ã©ditorial</a></li>
                <li><a href="#api-fiches">ğŸ“„ API Fiches - GÃ©nÃ©ration HTML</a></li>
                <li><a href="#package">ğŸ“¦ package.json - Configuration npm</a></li>
                <li><a href="#server">ğŸ–¥ï¸ server.js - Serveur central</a></li>
                <li><a href="#fiches">ğŸ“ Fiches/ - Sortie statique</a></li>
                <li><a href="#postgresql">ğŸ˜ PostgreSQL - Base de donnÃ©es</a></li>
                <li><a href="#sql-data">ğŸ—„ï¸ SQL Data - DonnÃ©es de seed</a></li>
                <li><a href="#generate">ğŸ”„ Generate - GÃ©nÃ©ration fiches</a></li>
                <li><a href="#verify">âœ… Verify - Validation donnÃ©es</a></li>
                <li><a href="#normalize">ğŸ”§ Normalize - Normalisation</a></li>
            </ul>
        </div>

        <!-- PAGES HTML -->
        <div class="component" id="pages-html">
            <h2><span class="component-icon">ğŸŒ</span> Pages HTML</h2>
            <div class="component-type"><span class="badge badge-frontend">Frontend</span></div>
            <div class="section-content">Ensemble des pages HTML statiques qui constituent l'interface utilisateur du site gamer. Servies directement par le serveur Express.</div>

            <div class="component-section">
                <div class="section-title">ğŸ“„ Fichiers principaux</div>
                <div class="list-item">index.html - Page d'accueil</div>
                <div class="list-item">16 pages catÃ©gories (drone.html, camera.html, etc.)</div>
                <div class="list-item">Pages de tendances (actualitÃ©s, technologies, marchÃ©, insights, prÃ©dictions)</div>
                <div class="list-item">Pages produits dynamiques</div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ”— Connexions</div>
                <div class="connections">
                    <div class="connections-title">RequÃªtes HTTP vers :</div>
                    <div class="connection-item">â†’ <strong>API Produits</strong> (GET /api/produits)</div>
                    <div class="connection-item">â†’ <strong>API Tendances</strong> (GET /api/:categorie/:type)</div>
                    <div class="connection-item">â†’ <strong>Assets</strong> (CSS, JS, images)</div>
                </div>
            </div>

            <div class="component-section">
                <div class="section-title">âš™ï¸ Routes servies</div>
                <div class="endpoint">
                    <span class="endpoint-method">GET</span> <span class="endpoint-path">/</span>
                    <div class="endpoint-desc">Accueil</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">GET</span> <span class="endpoint-path">/:categorie</span>
                    <div class="endpoint-desc">Page catÃ©gorie</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">GET</span> <span class="endpoint-path">/fiches/:categorie/:product</span>
                    <div class="endpoint-desc">Fiche produit</div>
                </div>
            </div>
        </div>

        <!-- ASSETS -->
        <div class="component" id="assets">
            <h2><span class="component-icon">ğŸ¨</span> Assets</h2>
            <div class="component-type"><span class="badge badge-frontend">Frontend</span></div>
            <div class="section-content">Ressources statiques minifiÃ©es : CSS, JavaScript et images du site. OptimisÃ©es pour la performance.</div>

            <div class="component-section">
                <div class="section-title">ğŸ“‚ Structure</div>
                <div class="list-item">frontend/public/assets/css/ - Fichiers CSS minifiÃ©s (styles.min.css)</div>
                <div class="list-item">frontend/public/assets/js/ - Fichiers JS minifiÃ©s (fiche-produit.min.js)</div>
                <div class="list-item">frontend/public/assets/images/ - Images produits et Ã©lÃ©ments UI</div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ“Š Statistiques</div>
                <div class="list-item">Taille compressÃ©e (gzip) : ~245KB</div>
                <div class="list-item">Nom de fichier : placeholder.png (par dÃ©faut pour images manquantes)</div>
                <div class="list-item">Format : MinifiÃ© avec Clean-CSS et Terser</div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ”§ Scripts npm de construction</div>
                <div class="endpoint">
                    <span class="endpoint-method">npm run build:css</span>
                    <div class="endpoint-desc">Minifier les fichiers CSS avec Clean-CSS</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">npm run build:js</span>
                    <div class="endpoint-desc">Minifier les fichiers JS avec Terser</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">npm run clean</span>
                    <div class="endpoint-desc">Supprimer les fichiers *.min.* existants</div>
                </div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ“ Routes d'accÃ¨s</div>
                <div class="endpoint">
                    <span class="endpoint-path">/assets/css/</span>
                    <div class="endpoint-desc">Feuilles de style CSS</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-path">/assets/js/</span>
                    <div class="endpoint-desc">Scripts JavaScript</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-path">/assets/images/</span>
                    <div class="endpoint-desc">Images et ressources</div>
                </div>
            </div>
        </div>

        <!-- API PRODUITS -->
        <div class="component" id="api-produits">
            <h2><span class="component-icon">ğŸ“¦</span> API Produits</h2>
            <div class="component-type"><span class="badge badge-api">API REST</span></div>
            <div class="section-content">Interface CRUD complÃ¨te pour gÃ©rer tous les produits gaming. Auto-gÃ©nÃ©ration des IDs en format prod_*.</div>

            <div class="component-section">
                <div class="section-title">ğŸ”Œ Endpoints</div>
                <div class="endpoint">
                    <span class="endpoint-method">GET</span> <span class="endpoint-path">/api/produits</span>
                    <div class="endpoint-desc">Lister tous les produits avec filtrage optionnel par catÃ©gorie</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">GET</span> <span class="endpoint-path">/api/produits?categorie=drone</span>
                    <div class="endpoint-desc">Filtrer les produits par catÃ©gorie (ex: drone, camera, smartphone)</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">POST</span> <span class="endpoint-path">/api/produits</span>
                    <div class="endpoint-desc">CrÃ©er un nouveau produit (ID auto-assignÃ©: prod_*)</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">PUT</span> <span class="endpoint-path">/api/produits/:id</span>
                    <div class="endpoint-desc">Mettre Ã  jour un produit (tous les champs requis)</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">DELETE</span> <span class="endpoint-path">/api/produits/:id</span>
                    <div class="endpoint-desc">Supprimer un produit (retourne le nom)</div>
                </div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ“‹ Champs produit</div>
                <div class="list-item"><strong>id</strong> - Format prod_* (auto-gÃ©nÃ©rÃ©)</div>
                <div class="list-item"><strong>nom</strong> - Nom du produit</div>
                <div class="list-item"><strong>categorie</strong> - CatÃ©gorie (drone, camera, etc.)</div>
                <div class="list-item"><strong>description</strong> - Description dÃ©taillÃ©e</div>
                <div class="list-item"><strong>prix_*</strong> - Tarifs par format</div>
                <div class="list-item"><strong>image</strong> - Nom du fichier (path: /assets/images/)</div>
                <div class="list-item"><strong>top_du_mois</strong> - Boolean (produit en vedette)</div>
                <div class="list-item"><strong>titre_affiche</strong> - Titre personnalisÃ© (optionnel)</div>
                <div class="list-item"><strong>fonctionnalites_avancees[]</strong> - Array de fonctionnalitÃ©s</div>
                <div class="list-item"><strong>donnees_fiche[]</strong> - Array de donnÃ©es pour la fiche</div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ’¾ Format image</div>
                <div class="section-content">Ne pas prÃ©fixer avec "assets/images/" - la gÃ©nÃ©ration l'ajoute automatiquement. Fallback: /assets/images/placeholder.png si absent.</div>
            </div>
        </div>

        <!-- API TENDANCES -->
        <div class="component" id="api-tendances">
            <h2><span class="component-icon">ğŸ”¥</span> API Tendances</h2>
            <div class="component-type"><span class="badge badge-api">API REST</span></div>
            <div class="section-content">Gestion des contenus Ã©ditoriaux par catÃ©gorie : actualitÃ©s, technologies, marchÃ©, insights et prÃ©dictions.</div>

            <div class="component-section">
                <div class="section-title">ğŸ”Œ Endpoints par type</div>
                <div class="endpoint">
                    <span class="endpoint-method">GET</span> <span class="endpoint-path">/api/:categorie/actualites</span>
                    <div class="endpoint-desc">ActualitÃ©s de la catÃ©gorie</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">GET</span> <span class="endpoint-path">/api/:categorie/technologies</span>
                    <div class="endpoint-desc">Technologies Ã©mergentes</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">GET</span> <span class="endpoint-path">/api/:categorie/marche</span>
                    <div class="endpoint-desc">Analyses de marchÃ©</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">GET</span> <span class="endpoint-path">/api/:categorie/insights</span>
                    <div class="endpoint-desc">Insights et analyses approfondies</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">GET</span> <span class="endpoint-path">/api/:categorie/predictions</span>
                    <div class="endpoint-desc">PrÃ©dictions futures</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">POST</span> <span class="endpoint-path">/api/:categorie/:type</span>
                    <div class="endpoint-desc">CrÃ©er un article</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">PUT</span> <span class="endpoint-path">/api/:categorie/:type/:id</span>
                    <div class="endpoint-desc">Mettre Ã  jour un article</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">DELETE</span> <span class="endpoint-path">/api/:categorie/:type/:id</span>
                    <div class="endpoint-desc">Supprimer un article</div>
                </div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ® CatÃ©gories supportÃ©es</div>
                <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                    <span class="tag">drone</span>
                    <span class="tag">camera</span>
                    <span class="tag">smartphone</span>
                    <span class="tag">tablette</span>
                    <span class="tag">pc-gaming</span>
                    <span class="tag">console</span>
                    <span class="tag">casque-vr</span>
                    <span class="tag">ecran-tv</span>
                    <span class="tag">video-projecteur</span>
                    <span class="tag">montre-connectee</span>
                    <span class="tag">peripheriques</span>
                    <span class="tag">imprimante-3d</span>
                    <span class="tag">serveur</span>
                    <span class="tag">box-internet</span>
                    <span class="tag">casque-audio</span>
                    <span class="tag">tableau-interactif</span>
                </div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ“Š Champs article</div>
                <div class="list-item"><strong>id</strong> - Identifiant unique</div>
                <div class="list-item"><strong>titre</strong> - Titre de l'article</div>
                <div class="list-item"><strong>contenu</strong> - Corps du texte</div>
                <div class="list-item"><strong>date</strong> - Date de publication</div>
                <div class="list-item"><strong>tags[]</strong> - Tags (stockÃ©s comme {a,b} en Postgres)</div>
                <div class="list-item"><strong>categorie</strong> - CatÃ©gorie (matching insensible Ã  la casse)</div>
            </div>
        </div>

        <!-- API FICHES -->
        <div class="component" id="api-fiches">
            <h2><span class="component-icon">ğŸ“„</span> API Fiches</h2>
            <div class="component-type"><span class="badge badge-api">API REST</span></div>
            <div class="section-content">GÃ©nÃ©ration dynamique et gestion des fiches produits en HTML statique. Slugification automatique des noms.</div>

            <div class="component-section">
                <div class="section-title">ğŸ”Œ Endpoints</div>
                <div class="endpoint">
                    <span class="endpoint-method">POST</span> <span class="endpoint-path">/api/generate-fiche/:id</span>
                    <div class="endpoint-desc">GÃ©nÃ©rer ou rÃ©gÃ©nÃ©rer une fiche produit HTML</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">DELETE</span> <span class="endpoint-path">/api/fiches/:id</span>
                    <div class="endpoint-desc">Supprimer une fiche (supprime le fichier physical)</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">GET</span> <span class="endpoint-path">/api/preview-fiche/:id</span>
                    <div class="endpoint-desc">AperÃ§u HTML de la fiche gÃ©nÃ©rÃ©e</div>
                </div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ“ Chemin de sortie</div>
                <div class="code-block">
                    <code>fiches/&lt;categorie-slug&gt;/&lt;product-slug&gt;.html</code>
                </div>
                <div class="list-item">Exemple: fiches/casque-vr/razer-viper.html</div>
                <div class="list-item">Slugification: espaces â†’ tirets, minuscules</div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ¨ Template</div>
                <div class="list-item">CSS: styles.min.css (minifiÃ©)</div>
                <div class="list-item">JS: fiche-produit.min.js (minifiÃ©)</div>
                <div class="list-item">Titre: titre_affiche || prettified(slug)</div>
                <div class="list-item">Images: /assets/images/{filename}</div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ”„ Processus gÃ©nÃ©ration</div>
                <div class="list-item">1. RÃ©cupÃ©rer les donnÃ©es du produit depuis PostgreSQL</div>
                <div class="list-item">2. GÃ©nÃ©rer le HTML avec le template</div>
                <div class="list-item">3. CrÃ©er la structure de dossiers si nÃ©cessaire</div>
                <div class="list-item">4. Sauvegarder le fichier HTML statique</div>
            </div>
        </div>

        <!-- PACKAGE.JSON -->
        <div class="component" id="package">
            <h2><span class="component-icon">ğŸ“¦</span> package.json</h2>
            <div class="component-type"><span class="badge badge-file">Configuration</span></div>
            <div class="section-content">Fichier de configuration Node.js avec dÃ©pendances et scripts npm du projet.</div>

            <div class="component-section">
                <div class="section-title">ğŸ“š DÃ©pendances principales</div>
                <div class="list-item"><strong>express</strong> - Framework web serveur</div>
                <div class="list-item"><strong>pg</strong> - Driver PostgreSQL</div>
                <div class="list-item"><strong>compression</strong> - Middleware GZIP</div>
                <div class="list-item"><strong>cors</strong> - Middleware CORS permissif</div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ”§ Scripts npm</div>
                <div class="endpoint">
                    <span class="endpoint-method">npm start</span>
                    <div class="endpoint-desc">Lancer le serveur en mode production</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">npm run dev</span>
                    <div class="endpoint-desc">Lancer avec nodemon (rechargement automatique)</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">npm run build:css</span>
                    <div class="endpoint-desc">Minifier CSS avec Clean-CSS</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">npm run build:js</span>
                    <div class="endpoint-desc">Minifier JS avec Terser</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">npm run clean</span>
                    <div class="endpoint-desc">Supprimer les fichiers minifiÃ©s</div>
                </div>
            </div>

            <div class="component-section">
                <div class="section-title">âš™ï¸ Configuration</div>
                <div class="list-item"><strong>Version Node</strong> : 18+</div>
                <div class="list-item"><strong>Type</strong> : commonjs</div>
                <div class="list-item"><strong>Author</strong> : Site Gamer 2025</div>
            </div>
        </div>

        <!-- SERVER.JS -->
        <div class="component" id="server">
            <h2><span class="component-icon">ğŸ–¥ï¸</span> server.js</h2>
            <div class="component-type"><span class="badge badge-server">Serveur Express</span></div>
            <div class="section-content">Serveur Express central qui orchestre toutes les API, le routage et la connexion Ã  PostgreSQL.</div>

            <div class="component-section">
                <div class="section-title">âš™ï¸ Configuration serveur</div>
                <div class="list-item"><strong>Port</strong> : 3000 (dÃ©faut)</div>
                <div class="list-item"><strong>Hostname</strong> : 0.0.0.0 (Ã©coute toutes les interfaces)</div>
                <div class="list-item"><strong>Mode</strong> : Production/DÃ©veloppement</div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ”‘ Credentials PostgreSQL</div>
                <div class="list-item"><strong>User</strong> : postgres</div>
                <div class="list-item"><strong>Database</strong> : gamer_2025</div>
                <div class="list-item"><strong>Password</strong> : XXXXXX</div>
            </div>

            <div class="component-section">
                <div class="section-title">âœ¨ FonctionnalitÃ©s clÃ©s</div>
                <div class="list-item">âœ“ Compression GZIP automatique via middleware</div>
                <div class="list-item">âœ“ CORS permissif pour toutes les routes</div>
                <div class="list-item">âœ“ Connexion PostgreSQL persistante (pool)</div>
                <div class="list-item">âœ“ Routage statique multi-Ã©tages (ordre important)</div>
                <div class="list-item">âœ“ API REST complÃ¨te pour produits et tendances</div>
                <div class="list-item">âœ“ GÃ©nÃ©ration dynamique de fiches HTML</div>
                <div class="list-item">âœ“ Gestion d'erreurs 404</div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ“ Ordre de routage statique</div>
                <div class="list-item">1. /assets â†’ frontend/public/assets</div>
                <div class="list-item">2. /frontend/public â†’ frontend/public</div>
                <div class="list-item">3. /fiches â†’ fiches/</div>
                <div class="list-item">4. / â†’ racine du projet</div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ”Œ Routes API principales</div>
                <div class="endpoint">
                    <span class="endpoint-method">GET</span> <span class="endpoint-path">/api/produits</span>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">GET</span> <span class="endpoint-path">/api/:categorie/:type</span>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">POST</span> <span class="endpoint-path">/api/generate-fiche/:id</span>
                </div>
            </div>
        </div>

        <!-- FICHES -->
        <div class="component" id="fiches">
            <h2><span class="component-icon">ğŸ“</span> Fiches/</h2>
            <div class="component-type"><span class="badge badge-file">RÃ©pertoire de sortie</span></div>
            <div class="section-content">Dossier contenant les fiches produits gÃ©nÃ©rÃ©es en HTML statique. 16 dossiers par catÃ©gorie.</div>

            <div class="component-section">
                <div class="section-title">ğŸ“‚ Structure de rÃ©pertoires</div>
                <div class="list-item">fiches/box-internet/</div>
                <div class="list-item">fiches/camera/</div>
                <div class="list-item">fiches/casque-audio/</div>
                <div class="list-item">fiches/casque-vr/</div>
                <div class="list-item">fiches/console/</div>
                <div class="list-item">fiches/drone/</div>
                <div class="list-item">fiches/ecran-tv/</div>
                <div class="list-item">fiches/imprimante-3d/</div>
                <div class="list-item">fiches/montre-connectee/</div>
                <div class="list-item">fiches/pc-gaming/</div>
                <div class="list-item">fiches/peripheriques/</div>
                <div class="list-item">fiches/serveur/</div>
                <div class="list-item">fiches/smartphone/</div>
                <div class="list-item">fiches/tableau-interactif/</div>
                <div class="list-item">fiches/tablette/</div>
                <div class="list-item">fiches/video-projecteur/</div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸŒ AccÃ¨s public</div>
                <div class="endpoint">
                    <span class="endpoint-path">/fiches/&lt;categorie&gt;/&lt;produit&gt;.html</span>
                    <div class="endpoint-desc">URL publique d'une fiche gÃ©nÃ©Ã©e</div>
                </div>
                <div class="list-item">Exemple: /fiches/drone/dji-air.html</div>
                <div class="list-item">AccÃ¨s direct via le navigateur</div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ’¾ Contenu fichiers HTML</div>
                <div class="list-item">Template HTML complet avec styles CSS inlines</div>
                <div class="list-item">JavaScript pour interactivitÃ© (fiche-produit.min.js)</div>
                <div class="list-item">Toutes les donnÃ©es du produit embarquÃ©es</div>
                <div class="list-item">Images rÃ©fÃ©rencÃ©es depuis /assets/images/</div>
                <div class="list-item">Slugs gÃ©nÃ©rÃ©s automatiquement Ã  partir du nom</div>
            </div>
        </div>

        <!-- POSTGRESQL -->
        <div class="component" id="postgresql">
            <h2><span class="component-icon">ğŸ˜</span> PostgreSQL</h2>
            <div class="component-type"><span class="badge badge-database">Base de DonnÃ©es</span></div>
            <div class="section-content">PostgreSQL 14+ - Base de donnÃ©es de production gamer_2025 stockant produits, catÃ©gories et contenus Ã©ditoriaux.</div>

            <div class="component-section">
                <div class="section-title">ğŸ”‘ Connexion</div>
                <div class="list-item"><strong>HÃ´te</strong> : localhost</div>
                <div class="list-item"><strong>Port</strong> : XXXX</div>
                <div class="list-item"><strong>User</strong> : postgres</div>
                <div class="list-item"><strong>Password</strong> : XXXXXX</div>
                <div class="list-item"><strong>Database</strong> : gamer_2025</div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ“‹ Tables principales</div>
                <div class="list-item"><strong>produits</strong> - 61+ produits avec spÃ©cifications et prix</div>
                <div class="list-item"><strong>categories</strong> - 16 catÃ©gories de gaming</div>
                <div class="list-item"><strong>tendances_actualites</strong> - ActualitÃ©s par catÃ©gorie</div>
                <div class="list-item"><strong>tendances_technologies</strong> - Technos Ã©mergentes</div>
                <div class="list-item"><strong>tendances_marche</strong> - Analyses marchÃ©</div>
                <div class="list-item"><strong>tendances_insights</strong> - Insights dÃ©taillÃ©s</div>
                <div class="list-item"><strong>tendances_predictions</strong> - PrÃ©dictions futures</div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ” SchÃ©ma produits</div>
                <div class="list-item"><strong>id</strong> (varchar) - prod_* (clÃ© primaire)</div>
                <div class="list-item"><strong>nom</strong> (varchar) - Nom produit</div>
                <div class="list-item"><strong>categorie</strong> (varchar) - CatÃ©gorie</div>
                <div class="list-item"><strong>description</strong> (text) - Description longue</div>
                <div class="list-item"><strong>image</strong> (varchar) - Fichier image</div>
                <div class="list-item"><strong>prix_*</strong> (numeric) - Tarifs par format</div>
                <div class="list-item"><strong>top_du_mois</strong> (boolean) - En vedette</div>
                <div class="list-item"><strong>titre_affiche</strong> (varchar, nullable) - Titre personnalisÃ©</div>
                <div class="list-item"><strong>fonctionnalites_avancees</strong> (text[]) - Array de features</div>
                <div class="list-item"><strong>donnees_fiche</strong> (text[]) - Array de donnÃ©es</div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ“Š Statistiques</div>
                <div class="list-item">61+ produits actuels</div>
                <div class="list-item">16 catÃ©gories de gaming</div>
                <div class="list-item">Centaines d'articles Ã©ditoriaux</div>
                <div class="list-item">DonnÃ©es historiques conservÃ©es</div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ’¾ Backups</div>
                <div class="list-item">backup_gamer_2025.sql - Sauvegarde complÃ¨te</div>
                <div class="list-item">Scripts de restauration disponibles</div>
            </div>
        </div>

        <!-- SQL DATA -->
        <div class="component" id="sql-data">
            <h2><span class="component-icon">ğŸ—„ï¸</span> SQL Data</h2>
            <div class="component-type"><span class="badge badge-file">DonnÃ©es de Seed</span></div>
            <div class="section-content">Scripts SQL et donnÃ©es d'initialisation pour peupler et maintenir la base de donnÃ©es PostgreSQL.</div>

            <div class="component-section">
                <div class="section-title">ğŸ“„ Fichiers SQL</div>
                <div class="list-item"><strong>backend/gestion_produits.sql</strong> - DonnÃ©es produits complÃ¨tes</div>
                <div class="list-item"><strong>backend/schema.sql</strong> - SchÃ©ma des tables</div>
                <div class="list-item"><strong>scripts/fix-database-inconsistencies.sql</strong> - Correctifs</div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ”§ Scripts de gestion</div>
                <div class="endpoint">
                    <span class="endpoint-method">node scripts/reinit-db.js</span>
                    <div class="endpoint-desc">RÃ©initialiser la base de donnÃ©es complÃ¨tement</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">node scripts/restore-db.js</span>
                    <div class="endpoint-desc">Restaurer depuis backup_gamer_2025.sql</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">node restore-backup.js</span>
                    <div class="endpoint-desc">Script de restauration backup</div>
                </div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ“Š Contenu seed</div>
                <div class="list-item">61 produits gaming avec spÃ©cifications complÃ¨tes</div>
                <div class="list-item">DonnÃ©es de prix pour diffÃ©rents formats</div>
                <div class="list-item">DonnÃ©es de fiche pour la gÃ©nÃ©ration HTML</div>
                <div class="list-item">SpÃ©cifications techniques dÃ©taillÃ©es</div>
                <div class="list-item">Tags et catÃ©gorisations</div>
            </div>
        </div>

        <!-- GENERATE -->
        <div class="component" id="generate">
            <h2><span class="component-icon">ğŸ”„</span> Generate</h2>
            <div class="component-type"><span class="badge badge-script">Scripts de Production</span></div>
            <div class="section-content">Scripts Node.js pour gÃ©nÃ©rer massivement les fiches produits en HTML statique depuis les donnÃ©es PostgreSQL.</div>

            <div class="component-section">
                <div class="section-title">ğŸ“‹ Scripts disponibles</div>
                <div class="endpoint">
                    <span class="endpoint-method">generate-all-new-fiches.js</span>
                    <div class="endpoint-desc">POST /api/generate-fiche/:id pour chaque produit via HTTP</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">generate-new-products.js</span>
                    <div class="endpoint-desc">GÃ©nÃ©ration directe depuis DB pour prod_50-61</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">regenerate-all-fiches.js</span>
                    <div class="endpoint-desc">RegÃ©nÃ©rer toutes les fiches existantes</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">regenerate-all-fiches-direct.js</span>
                    <div class="endpoint-desc">RegÃ©nÃ©ration directe sans API HTTP</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">regenerate-fiches-top.js</span>
                    <div class="endpoint-desc">RegÃ©nÃ©rer seulement les top_du_mois</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">regenerate-normalized-fiches.js</span>
                    <div class="endpoint-desc">Fiches avec donnÃ©es normalisÃ©es</div>
                </div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸš€ Usage</div>
                <div class="code-block">
                    <code>node scripts/generate-all-new-fiches.js</code>
                </div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ”„ Processus</div>
                <div class="list-item">1. Lire les produits depuis PostgreSQL</div>
                <div class="list-item">2. GÃ©nÃ©rer le HTML pour chaque produit</div>
                <div class="list-item">3. CrÃ©er les dossiers catÃ©gories si nÃ©cessaire</div>
                <div class="list-item">4. Sauvegarder les fichiers .html statiques</div>
                <div class="list-item">5. Afficher un rÃ©sumÃ© d'exÃ©cution</div>
            </div>

            <div class="component-section">
                <div class="section-title">âš™ï¸ Options</div>
                <div class="list-item">Peut utiliser l'API HTTP (lent mais sÃ»r)</div>
                <div class="list-item">Peut gÃ©nÃ©rer directement depuis DB (rapide)</div>
                <div class="list-item">Supporte la rÃ©gÃ©nÃ©ration sÃ©lective</div>
            </div>
        </div>

        <!-- VERIFY -->
        <div class="component" id="verify">
            <h2><span class="component-icon">âœ…</span> Verify</h2>
            <div class="component-type"><span class="badge badge-script">Scripts de Validation</span></div>
            <div class="section-content">Scripts de vÃ©rification et validation pour assurer l'intÃ©gritÃ© et la cohÃ©rence des donnÃ©es dans la base de donnÃ©es.</div>

            <div class="component-section">
                <div class="section-title">ğŸ“‹ Scripts disponibles</div>
                <div class="endpoint">
                    <span class="endpoint-method">verify-database-state.js</span>
                    <div class="endpoint-desc">ContrÃ´les qualitÃ© complets : prÃ©sence produits, validitÃ© formats, etc.</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">quick-check-db.js</span>
                    <div class="endpoint-desc">VÃ©rification rapide de connectivitÃ© et prÃ©sence donnÃ©es</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">quick-check.js</span>
                    <div class="endpoint-desc">Sanity checks gÃ©nÃ©raux du projet</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">check-schemas.js</span>
                    <div class="endpoint-desc">Validation des schÃ©mas de tables</div>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">check-prod1.js</span>
                    <div class="endpoint-desc">VÃ©rification spÃ©cifique produit prod_1</div>
                </div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ” VÃ©rifications effectuÃ©es</div>
                <div class="list-item">âœ“ PrÃ©sence de tous les produits attendus</div>
                <div class="list-item">âœ“ ValiditÃ© des formats de prix</div>
                <div class="list-item">âœ“ IntÃ©gritÃ© des catÃ©gories (case-sensitive check)</div>
                <div class="list-item">âœ“ Chemins absolus pour images</div>
                <div class="list-item">âœ“ Absence d'espaces non-Ã©chappÃ©s dans URLs</div>
                <div class="list-item">âœ“ CohÃ©rence des donnÃ©es de fiche</div>
                <div class="list-item">âœ“ ValiditÃ© des fonctionnalitÃ©s avancÃ©es</div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸš€ Usage</div>
                <div class="code-block">
                    <code>node scripts/verify-database-state.js</code>
                </div>
            </div>
        </div>

        <!-- NORMALIZE -->
        <div class="component" id="normalize">
            <h2><span class="component-icon">ğŸ”§</span> Normalize</h2>
            <div class="component-type"><span class="badge badge-script">Scripts de Normalisation</span></div>
            <div class="section-content">Scripts de normalisation des donnÃ©es par catÃ©gorie pour uniformiser formats, prix et structure des donnÃ©es.</div>

            <div class="component-section">
                <div class="section-title">ğŸ“‹ Scripts par catÃ©gorie</div>
                <div class="list-item">normalize-camera.js</div>
                <div class="list-item">normalize-casque-vr.js</div>
                <div class="list-item">normalize-drone.js</div>
                <div class="list-item">normalize-ecran-tv.js</div>
                <div class="list-item">normalize-montre-connectee.js</div>
                <div class="list-item">normalize-smartphone.js</div>
                <div class="list-item">normalize-tablette.js</div>
                <div class="list-item">normalize-video-projecteur.js</div>
                <div class="list-item">normalize-remaining-categories.js</div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸ¯ Objectifs</div>
                <div class="list-item">Uniformiser les formats de prix par catÃ©gorie</div>
                <div class="list-item">Normaliser les spÃ©cifications techniques</div>
                <div class="list-item">Organiser les donnÃ©es de fiche</div>
                <div class="list-item">Valider les images prÃ©sentes</div>
                <div class="list-item">Structurer les fonctionnalitÃ©s avancÃ©es</div>
            </div>

            <div class="component-section">
                <div class="section-title">ğŸš€ Usage</div>
                <div class="code-block">
                    <code>node scripts/normalize-camera.js</code>
                </div>
            </div>

            <div class="component-section">
                <div class="section-title">âš™ï¸ Processus</div>
                <div class="list-item">1. Lire tous les produits de la catÃ©gorie</div>
                <div class="list-item">2. Appliquer les rÃ¨gles de normalisation</div>
                <div class="list-item">3. Valider les changements</div>
                <div class="list-item">4. Mettre Ã  jour la base de donnÃ©es</div>
                <div class="list-item">5. Afficher le rapport de modifications</div>
            </div>
        </div>
    </div>

    <div class="footer">
        <p>ğŸ“š Documentation complÃ¨te de l'architecture Site Gamer 2025</p>
        <p>DerniÃ¨re mise Ã  jour : 26 dÃ©cembre 2025</p>
        <p><a href="project-connections-vue.html" style="color: #d4ff00; text-decoration: none;">â† Retour au diagramme interactif</a> | <a href="wiki.html" style="color: #d4ff00; text-decoration: none;">Wiki Home</a></p>
    </div>
</body>
</html>
